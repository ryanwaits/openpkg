{"version":3,"sources":["../../../../../node_modules/%40better-auth/utils/dist/random.mjs","../../../../../node_modules/%40better-auth/core/dist/env-DbssmzoK.mjs","../../../../../node_modules/%40better-auth/core/dist/utils-NloIXYE0.mjs","../../../../../node_modules/%40better-auth/core/dist/error-CzMAIrPb.mjs","../../../../../node_modules/%40better-auth/core/dist/get-tables-DeuRhD_P.mjs","../../../../../node_modules/%40better-auth/core/dist/db/adapter/index.mjs"],"sourcesContent":["function expandAlphabet(alphabet) {\n  switch (alphabet) {\n    case \"a-z\":\n      return \"abcdefghijklmnopqrstuvwxyz\";\n    case \"A-Z\":\n      return \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    case \"0-9\":\n      return \"0123456789\";\n    case \"-_\":\n      return \"-_\";\n    default:\n      throw new Error(`Unsupported alphabet: ${alphabet}`);\n  }\n}\nfunction createRandomStringGenerator(...baseAlphabets) {\n  const baseCharSet = baseAlphabets.map(expandAlphabet).join(\"\");\n  if (baseCharSet.length === 0) {\n    throw new Error(\n      \"No valid characters provided for random string generation.\"\n    );\n  }\n  const baseCharSetLength = baseCharSet.length;\n  return (length, ...alphabets) => {\n    if (length <= 0) {\n      throw new Error(\"Length must be a positive integer.\");\n    }\n    let charSet = baseCharSet;\n    let charSetLength = baseCharSetLength;\n    if (alphabets.length > 0) {\n      charSet = alphabets.map(expandAlphabet).join(\"\");\n      charSetLength = charSet.length;\n    }\n    const maxValid = Math.floor(256 / charSetLength) * charSetLength;\n    const buf = new Uint8Array(length * 2);\n    const bufLength = buf.length;\n    let result = \"\";\n    let bufIndex = bufLength;\n    let rand;\n    while (result.length < length) {\n      if (bufIndex >= bufLength) {\n        crypto.getRandomValues(buf);\n        bufIndex = 0;\n      }\n      rand = buf[bufIndex++];\n      if (rand < maxValid) {\n        result += charSet[rand % charSetLength];\n      }\n    }\n    return result;\n  };\n}\n\nexport { createRandomStringGenerator };\n","//#region src/env/env-impl.ts\nconst _envShim = Object.create(null);\nconst _getEnv = (useShim) => globalThis.process?.env || globalThis.Deno?.env.toObject() || globalThis.__env__ || (useShim ? _envShim : globalThis);\nconst env = new Proxy(_envShim, {\n\tget(_, prop) {\n\t\treturn _getEnv()[prop] ?? _envShim[prop];\n\t},\n\thas(_, prop) {\n\t\treturn prop in _getEnv() || prop in _envShim;\n\t},\n\tset(_, prop, value) {\n\t\tconst env$1 = _getEnv(true);\n\t\tenv$1[prop] = value;\n\t\treturn true;\n\t},\n\tdeleteProperty(_, prop) {\n\t\tif (!prop) return false;\n\t\tconst env$1 = _getEnv(true);\n\t\tdelete env$1[prop];\n\t\treturn true;\n\t},\n\townKeys() {\n\t\tconst env$1 = _getEnv(true);\n\t\treturn Object.keys(env$1);\n\t}\n});\nfunction toBoolean(val) {\n\treturn val ? val !== \"false\" : false;\n}\nconst nodeENV = typeof process !== \"undefined\" && process.env && process.env.NODE_ENV || \"\";\n/** Detect if `NODE_ENV` environment variable is `production` */\nconst isProduction = nodeENV === \"production\";\n/** Detect if `NODE_ENV` environment variable is `dev` or `development` */\nconst isDevelopment = () => nodeENV === \"dev\" || nodeENV === \"development\";\n/** Detect if `NODE_ENV` environment variable is `test` */\nconst isTest = () => nodeENV === \"test\" || toBoolean(env.TEST);\n/**\n* Get environment variable with fallback\n*/\nfunction getEnvVar(key, fallback) {\n\tif (typeof process !== \"undefined\" && process.env) return process.env[key] ?? fallback;\n\tif (typeof Deno !== \"undefined\") return Deno.env.get(key) ?? fallback;\n\tif (typeof Bun !== \"undefined\") return Bun.env[key] ?? fallback;\n\treturn fallback;\n}\n/**\n* Get boolean environment variable\n*/\nfunction getBooleanEnvVar(key, fallback = true) {\n\tconst value = getEnvVar(key);\n\tif (!value) return fallback;\n\treturn value !== \"0\" && value.toLowerCase() !== \"false\" && value !== \"\";\n}\n/**\n* Common environment variables used in Better Auth\n*/\nconst ENV = Object.freeze({\n\tget BETTER_AUTH_SECRET() {\n\t\treturn getEnvVar(\"BETTER_AUTH_SECRET\");\n\t},\n\tget AUTH_SECRET() {\n\t\treturn getEnvVar(\"AUTH_SECRET\");\n\t},\n\tget BETTER_AUTH_TELEMETRY() {\n\t\treturn getEnvVar(\"BETTER_AUTH_TELEMETRY\");\n\t},\n\tget BETTER_AUTH_TELEMETRY_ID() {\n\t\treturn getEnvVar(\"BETTER_AUTH_TELEMETRY_ID\");\n\t},\n\tget NODE_ENV() {\n\t\treturn getEnvVar(\"NODE_ENV\", \"development\");\n\t},\n\tget PACKAGE_VERSION() {\n\t\treturn getEnvVar(\"PACKAGE_VERSION\", \"0.0.0\");\n\t},\n\tget BETTER_AUTH_TELEMETRY_ENDPOINT() {\n\t\treturn getEnvVar(\"BETTER_AUTH_TELEMETRY_ENDPOINT\", \"https://telemetry.better-auth.com/v1/track\");\n\t}\n});\n\n//#endregion\n//#region src/env/color-depth.ts\nconst COLORS_2 = 1;\nconst COLORS_16 = 4;\nconst COLORS_256 = 8;\nconst COLORS_16m = 24;\nconst TERM_ENVS = {\n\teterm: COLORS_16,\n\tcons25: COLORS_16,\n\tconsole: COLORS_16,\n\tcygwin: COLORS_16,\n\tdtterm: COLORS_16,\n\tgnome: COLORS_16,\n\thurd: COLORS_16,\n\tjfbterm: COLORS_16,\n\tkonsole: COLORS_16,\n\tkterm: COLORS_16,\n\tmlterm: COLORS_16,\n\tmosh: COLORS_16m,\n\tputty: COLORS_16,\n\tst: COLORS_16,\n\t\"rxvt-unicode-24bit\": COLORS_16m,\n\tterminator: COLORS_16m,\n\t\"xterm-kitty\": COLORS_16m\n};\nconst CI_ENVS_MAP = new Map(Object.entries({\n\tAPPVEYOR: COLORS_256,\n\tBUILDKITE: COLORS_256,\n\tCIRCLECI: COLORS_16m,\n\tDRONE: COLORS_256,\n\tGITEA_ACTIONS: COLORS_16m,\n\tGITHUB_ACTIONS: COLORS_16m,\n\tGITLAB_CI: COLORS_256,\n\tTRAVIS: COLORS_256\n}));\nconst TERM_ENVS_REG_EXP = [\n\t/ansi/,\n\t/color/,\n\t/linux/,\n\t/direct/,\n\t/^con[0-9]*x[0-9]/,\n\t/^rxvt/,\n\t/^screen/,\n\t/^xterm/,\n\t/^vt100/,\n\t/^vt220/\n];\nfunction getColorDepth() {\n\tif (getEnvVar(\"FORCE_COLOR\") !== void 0) switch (getEnvVar(\"FORCE_COLOR\")) {\n\t\tcase \"\":\n\t\tcase \"1\":\n\t\tcase \"true\": return COLORS_16;\n\t\tcase \"2\": return COLORS_256;\n\t\tcase \"3\": return COLORS_16m;\n\t\tdefault: return COLORS_2;\n\t}\n\tif (getEnvVar(\"NODE_DISABLE_COLORS\") !== void 0 && getEnvVar(\"NODE_DISABLE_COLORS\") !== \"\" || getEnvVar(\"NO_COLOR\") !== void 0 && getEnvVar(\"NO_COLOR\") !== \"\" || getEnvVar(\"TERM\") === \"dumb\") return COLORS_2;\n\tif (getEnvVar(\"TMUX\")) return COLORS_16m;\n\tif (\"TF_BUILD\" in env && \"AGENT_NAME\" in env) return COLORS_16;\n\tif (\"CI\" in env) {\n\t\tfor (const { 0: envName, 1: colors } of CI_ENVS_MAP) if (envName in env) return colors;\n\t\tif (getEnvVar(\"CI_NAME\") === \"codeship\") return COLORS_256;\n\t\treturn COLORS_2;\n\t}\n\tif (\"TEAMCITY_VERSION\" in env) return /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.exec(getEnvVar(\"TEAMCITY_VERSION\")) !== null ? COLORS_16 : COLORS_2;\n\tswitch (getEnvVar(\"TERM_PROGRAM\")) {\n\t\tcase \"iTerm.app\":\n\t\t\tif (!getEnvVar(\"TERM_PROGRAM_VERSION\") || /^[0-2]\\./.exec(getEnvVar(\"TERM_PROGRAM_VERSION\")) !== null) return COLORS_256;\n\t\t\treturn COLORS_16m;\n\t\tcase \"HyperTerm\":\n\t\tcase \"MacTerm\": return COLORS_16m;\n\t\tcase \"Apple_Terminal\": return COLORS_256;\n\t}\n\tif (getEnvVar(\"COLORTERM\") === \"truecolor\" || getEnvVar(\"COLORTERM\") === \"24bit\") return COLORS_16m;\n\tif (getEnvVar(\"TERM\")) {\n\t\tif (/truecolor/.exec(getEnvVar(\"TERM\")) !== null) return COLORS_16m;\n\t\tif (/^xterm-256/.exec(getEnvVar(\"TERM\")) !== null) return COLORS_256;\n\t\tconst termEnv = getEnvVar(\"TERM\").toLowerCase();\n\t\tif (TERM_ENVS[termEnv]) return TERM_ENVS[termEnv];\n\t\tif (TERM_ENVS_REG_EXP.some((term) => term.exec(termEnv) !== null)) return COLORS_16;\n\t}\n\tif (getEnvVar(\"COLORTERM\")) return COLORS_16;\n\treturn COLORS_2;\n}\n\n//#endregion\n//#region src/env/logger.ts\nconst TTY_COLORS = {\n\treset: \"\\x1B[0m\",\n\tbright: \"\\x1B[1m\",\n\tdim: \"\\x1B[2m\",\n\tundim: \"\\x1B[22m\",\n\tunderscore: \"\\x1B[4m\",\n\tblink: \"\\x1B[5m\",\n\treverse: \"\\x1B[7m\",\n\thidden: \"\\x1B[8m\",\n\tfg: {\n\t\tblack: \"\\x1B[30m\",\n\t\tred: \"\\x1B[31m\",\n\t\tgreen: \"\\x1B[32m\",\n\t\tyellow: \"\\x1B[33m\",\n\t\tblue: \"\\x1B[34m\",\n\t\tmagenta: \"\\x1B[35m\",\n\t\tcyan: \"\\x1B[36m\",\n\t\twhite: \"\\x1B[37m\"\n\t},\n\tbg: {\n\t\tblack: \"\\x1B[40m\",\n\t\tred: \"\\x1B[41m\",\n\t\tgreen: \"\\x1B[42m\",\n\t\tyellow: \"\\x1B[43m\",\n\t\tblue: \"\\x1B[44m\",\n\t\tmagenta: \"\\x1B[45m\",\n\t\tcyan: \"\\x1B[46m\",\n\t\twhite: \"\\x1B[47m\"\n\t}\n};\nconst levels = [\n\t\"debug\",\n\t\"info\",\n\t\"success\",\n\t\"warn\",\n\t\"error\"\n];\nfunction shouldPublishLog(currentLogLevel, logLevel) {\n\treturn levels.indexOf(logLevel) >= levels.indexOf(currentLogLevel);\n}\nconst levelColors = {\n\tinfo: TTY_COLORS.fg.blue,\n\tsuccess: TTY_COLORS.fg.green,\n\twarn: TTY_COLORS.fg.yellow,\n\terror: TTY_COLORS.fg.red,\n\tdebug: TTY_COLORS.fg.magenta\n};\nconst formatMessage = (level, message, colorsEnabled) => {\n\tconst timestamp = (/* @__PURE__ */ new Date()).toISOString();\n\tif (colorsEnabled) return `${TTY_COLORS.dim}${timestamp}${TTY_COLORS.reset} ${levelColors[level]}${level.toUpperCase()}${TTY_COLORS.reset} ${TTY_COLORS.bright}[Better Auth]:${TTY_COLORS.reset} ${message}`;\n\treturn `${timestamp} ${level.toUpperCase()} [Better Auth]: ${message}`;\n};\nconst createLogger = (options) => {\n\tconst enabled = options?.disabled !== true;\n\tconst logLevel = options?.level ?? \"error\";\n\tconst colorsEnabled = options?.disableColors !== void 0 ? !options.disableColors : getColorDepth() !== 1;\n\tconst LogFunc = (level, message, args = []) => {\n\t\tif (!enabled || !shouldPublishLog(logLevel, level)) return;\n\t\tconst formattedMessage = formatMessage(level, message, colorsEnabled);\n\t\tif (!options || typeof options.log !== \"function\") {\n\t\t\tif (level === \"error\") console.error(formattedMessage, ...args);\n\t\t\telse if (level === \"warn\") console.warn(formattedMessage, ...args);\n\t\t\telse console.log(formattedMessage, ...args);\n\t\t\treturn;\n\t\t}\n\t\toptions.log(level === \"success\" ? \"info\" : level, message, ...args);\n\t};\n\treturn {\n\t\t...Object.fromEntries(levels.map((level) => [level, (...[message, ...args]) => LogFunc(level, message, args)])),\n\t\tget level() {\n\t\t\treturn logLevel;\n\t\t}\n\t};\n};\nconst logger = createLogger();\n\n//#endregion\nexport { shouldPublishLog as a, env as c, isDevelopment as d, isProduction as f, logger as i, getBooleanEnvVar as l, nodeENV as m, createLogger as n, getColorDepth as o, isTest as p, levels as r, ENV as s, TTY_COLORS as t, getEnvVar as u };","import { i as logger } from \"./env-DbssmzoK.mjs\";\nimport { createRandomStringGenerator } from \"@better-auth/utils/random\";\n\n//#region src/utils/error-codes.ts\nfunction defineErrorCodes(codes) {\n\treturn codes;\n}\n\n//#endregion\n//#region src/utils/id.ts\nconst generateId = (size) => {\n\treturn createRandomStringGenerator(\"a-z\", \"A-Z\", \"0-9\")(size || 32);\n};\n\n//#endregion\n//#region src/utils/json.ts\nfunction safeJSONParse(data) {\n\tfunction reviver(_, value) {\n\t\tif (typeof value === \"string\") {\n\t\t\tif (/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?Z$/.test(value)) {\n\t\t\t\tconst date = new Date(value);\n\t\t\t\tif (!isNaN(date.getTime())) return date;\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\ttry {\n\t\tif (typeof data !== \"string\") return data;\n\t\treturn JSON.parse(data, reviver);\n\t} catch (e) {\n\t\tlogger.error(\"Error parsing JSON\", { error: e });\n\t\treturn null;\n\t}\n}\n\n//#endregion\n//#region src/utils/string.ts\nfunction capitalizeFirstLetter(str) {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n//#endregion\nexport { defineErrorCodes as i, safeJSONParse as n, generateId as r, capitalizeFirstLetter as t };","import { i as defineErrorCodes } from \"./utils-NloIXYE0.mjs\";\n\n//#region src/error/codes.ts\nconst BASE_ERROR_CODES = defineErrorCodes({\n\tUSER_NOT_FOUND: \"User not found\",\n\tFAILED_TO_CREATE_USER: \"Failed to create user\",\n\tFAILED_TO_CREATE_SESSION: \"Failed to create session\",\n\tFAILED_TO_UPDATE_USER: \"Failed to update user\",\n\tFAILED_TO_GET_SESSION: \"Failed to get session\",\n\tINVALID_PASSWORD: \"Invalid password\",\n\tINVALID_EMAIL: \"Invalid email\",\n\tINVALID_EMAIL_OR_PASSWORD: \"Invalid email or password\",\n\tSOCIAL_ACCOUNT_ALREADY_LINKED: \"Social account already linked\",\n\tPROVIDER_NOT_FOUND: \"Provider not found\",\n\tINVALID_TOKEN: \"Invalid token\",\n\tID_TOKEN_NOT_SUPPORTED: \"id_token not supported\",\n\tFAILED_TO_GET_USER_INFO: \"Failed to get user info\",\n\tUSER_EMAIL_NOT_FOUND: \"User email not found\",\n\tEMAIL_NOT_VERIFIED: \"Email not verified\",\n\tPASSWORD_TOO_SHORT: \"Password too short\",\n\tPASSWORD_TOO_LONG: \"Password too long\",\n\tUSER_ALREADY_EXISTS: \"User already exists.\",\n\tUSER_ALREADY_EXISTS_USE_ANOTHER_EMAIL: \"User already exists. Use another email.\",\n\tEMAIL_CAN_NOT_BE_UPDATED: \"Email can not be updated\",\n\tCREDENTIAL_ACCOUNT_NOT_FOUND: \"Credential account not found\",\n\tSESSION_EXPIRED: \"Session expired. Re-authenticate to perform this action.\",\n\tFAILED_TO_UNLINK_LAST_ACCOUNT: \"You can't unlink your last account\",\n\tACCOUNT_NOT_FOUND: \"Account not found\",\n\tUSER_ALREADY_HAS_PASSWORD: \"User already has a password. Provide that to delete the account.\"\n});\n\n//#endregion\n//#region src/error/index.ts\nvar BetterAuthError = class extends Error {\n\tconstructor(message, cause) {\n\t\tsuper(message);\n\t\tthis.name = \"BetterAuthError\";\n\t\tthis.message = message;\n\t\tthis.cause = cause;\n\t\tthis.stack = \"\";\n\t}\n};\n\n//#endregion\nexport { BASE_ERROR_CODES as n, BetterAuthError as t };","//#region src/db/get-tables.ts\nconst getAuthTables = (options) => {\n\tconst pluginSchema = (options.plugins ?? []).reduce((acc, plugin) => {\n\t\tconst schema = plugin.schema;\n\t\tif (!schema) return acc;\n\t\tfor (const [key, value] of Object.entries(schema)) acc[key] = {\n\t\t\tfields: {\n\t\t\t\t...acc[key]?.fields,\n\t\t\t\t...value.fields\n\t\t\t},\n\t\t\tmodelName: value.modelName || key\n\t\t};\n\t\treturn acc;\n\t}, {});\n\tconst shouldAddRateLimitTable = options.rateLimit?.storage === \"database\";\n\tconst rateLimitTable = { rateLimit: {\n\t\tmodelName: options.rateLimit?.modelName || \"rateLimit\",\n\t\tfields: {\n\t\t\tkey: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tfieldName: options.rateLimit?.fields?.key || \"key\"\n\t\t\t},\n\t\t\tcount: {\n\t\t\t\ttype: \"number\",\n\t\t\t\tfieldName: options.rateLimit?.fields?.count || \"count\"\n\t\t\t},\n\t\t\tlastRequest: {\n\t\t\t\ttype: \"number\",\n\t\t\t\tbigint: true,\n\t\t\t\tfieldName: options.rateLimit?.fields?.lastRequest || \"lastRequest\"\n\t\t\t}\n\t\t}\n\t} };\n\tconst { user, session, account, ...pluginTables } = pluginSchema;\n\tconst sessionTable = { session: {\n\t\tmodelName: options.session?.modelName || \"session\",\n\t\tfields: {\n\t\t\texpiresAt: {\n\t\t\t\ttype: \"date\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: options.session?.fields?.expiresAt || \"expiresAt\"\n\t\t\t},\n\t\t\ttoken: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: options.session?.fields?.token || \"token\",\n\t\t\t\tunique: true\n\t\t\t},\n\t\t\tcreatedAt: {\n\t\t\t\ttype: \"date\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: options.session?.fields?.createdAt || \"createdAt\",\n\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date()\n\t\t\t},\n\t\t\tupdatedAt: {\n\t\t\t\ttype: \"date\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: options.session?.fields?.updatedAt || \"updatedAt\",\n\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date()\n\t\t\t},\n\t\t\tipAddress: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: false,\n\t\t\t\tfieldName: options.session?.fields?.ipAddress || \"ipAddress\"\n\t\t\t},\n\t\t\tuserAgent: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: false,\n\t\t\t\tfieldName: options.session?.fields?.userAgent || \"userAgent\"\n\t\t\t},\n\t\t\tuserId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tfieldName: options.session?.fields?.userId || \"userId\",\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: options.user?.modelName || \"user\",\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tonDelete: \"cascade\"\n\t\t\t\t},\n\t\t\t\trequired: true,\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\t...session?.fields,\n\t\t\t...options.session?.additionalFields\n\t\t},\n\t\torder: 2\n\t} };\n\treturn {\n\t\tuser: {\n\t\t\tmodelName: options.user?.modelName || \"user\",\n\t\t\tfields: {\n\t\t\t\tname: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.user?.fields?.name || \"name\",\n\t\t\t\t\tsortable: true\n\t\t\t\t},\n\t\t\t\temail: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tunique: true,\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.user?.fields?.email || \"email\",\n\t\t\t\t\tsortable: true\n\t\t\t\t},\n\t\t\t\temailVerified: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdefaultValue: false,\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.user?.fields?.emailVerified || \"emailVerified\",\n\t\t\t\t\tinput: false\n\t\t\t\t},\n\t\t\t\timage: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.user?.fields?.image || \"image\"\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.user?.fields?.createdAt || \"createdAt\"\n\t\t\t\t},\n\t\t\t\tupdatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.user?.fields?.updatedAt || \"updatedAt\"\n\t\t\t\t},\n\t\t\t\t...user?.fields,\n\t\t\t\t...options.user?.additionalFields\n\t\t\t},\n\t\t\torder: 1\n\t\t},\n\t\t...!options.secondaryStorage || options.session?.storeSessionInDatabase ? sessionTable : {},\n\t\taccount: {\n\t\t\tmodelName: options.account?.modelName || \"account\",\n\t\t\tfields: {\n\t\t\t\taccountId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.account?.fields?.accountId || \"accountId\"\n\t\t\t\t},\n\t\t\t\tproviderId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.account?.fields?.providerId || \"providerId\"\n\t\t\t\t},\n\t\t\t\tuserId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: options.user?.modelName || \"user\",\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tonDelete: \"cascade\"\n\t\t\t\t\t},\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.account?.fields?.userId || \"userId\",\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\taccessToken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.accessToken || \"accessToken\"\n\t\t\t\t},\n\t\t\t\trefreshToken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.refreshToken || \"refreshToken\"\n\t\t\t\t},\n\t\t\t\tidToken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.idToken || \"idToken\"\n\t\t\t\t},\n\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.accessTokenExpiresAt || \"accessTokenExpiresAt\"\n\t\t\t\t},\n\t\t\t\trefreshTokenExpiresAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.refreshTokenExpiresAt || \"refreshTokenExpiresAt\"\n\t\t\t\t},\n\t\t\t\tscope: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.scope || \"scope\"\n\t\t\t\t},\n\t\t\t\tpassword: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options.account?.fields?.password || \"password\"\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.account?.fields?.createdAt || \"createdAt\",\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date()\n\t\t\t\t},\n\t\t\t\tupdatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.account?.fields?.updatedAt || \"updatedAt\",\n\t\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date()\n\t\t\t\t},\n\t\t\t\t...account?.fields,\n\t\t\t\t...options.account?.additionalFields\n\t\t\t},\n\t\t\torder: 3\n\t\t},\n\t\tverification: {\n\t\t\tmodelName: options.verification?.modelName || \"verification\",\n\t\t\tfields: {\n\t\t\t\tidentifier: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.verification?.fields?.identifier || \"identifier\",\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tvalue: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.verification?.fields?.value || \"value\"\n\t\t\t\t},\n\t\t\t\texpiresAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options.verification?.fields?.expiresAt || \"expiresAt\"\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\tfieldName: options.verification?.fields?.createdAt || \"createdAt\"\n\t\t\t\t},\n\t\t\t\tupdatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date(),\n\t\t\t\t\tfieldName: options.verification?.fields?.updatedAt || \"updatedAt\"\n\t\t\t\t}\n\t\t\t},\n\t\t\torder: 4\n\t\t},\n\t\t...pluginTables,\n\t\t...shouldAddRateLimitTable ? rateLimitTable : {}\n\t};\n};\n\n//#endregion\nexport { getAuthTables as t };","import { t as getAuthTables } from \"../../get-tables-DeuRhD_P.mjs\";\nimport { i as logger, n as createLogger, o as getColorDepth, t as TTY_COLORS } from \"../../env-DbssmzoK.mjs\";\nimport { n as safeJSONParse, r as generateId } from \"../../utils-NloIXYE0.mjs\";\nimport { t as BetterAuthError } from \"../../error-CzMAIrPb.mjs\";\n\n//#region src/db/adapter/get-default-model-name.ts\nconst initGetDefaultModelName = ({ usePlural, schema }) => {\n\t/**\n\t* This function helps us get the default model name from the schema defined by devs.\n\t* Often times, the user will be using the `modelName` which could had been customized by the users.\n\t* This function helps us get the actual model name useful to match against the schema. (eg: schema[model])\n\t*\n\t* If it's still unclear what this does:\n\t*\n\t* 1. User can define a custom modelName.\n\t* 2. When using a custom modelName, doing something like `schema[model]` will not work.\n\t* 3. Using this function helps us get the actual model name based on the user's defined custom modelName.\n\t*/\n\tconst getDefaultModelName = (model) => {\n\t\tif (usePlural && model.charAt(model.length - 1) === \"s\") {\n\t\t\tlet pluralessModel = model.slice(0, -1);\n\t\t\tlet m$1 = schema[pluralessModel] ? pluralessModel : void 0;\n\t\t\tif (!m$1) m$1 = Object.entries(schema).find(([_, f]) => f.modelName === pluralessModel)?.[0];\n\t\t\tif (m$1) return m$1;\n\t\t}\n\t\tlet m = schema[model] ? model : void 0;\n\t\tif (!m) m = Object.entries(schema).find(([_, f]) => f.modelName === model)?.[0];\n\t\tif (!m) throw new BetterAuthError(`Model \"${model}\" not found in schema`);\n\t\treturn m;\n\t};\n\treturn getDefaultModelName;\n};\n\n//#endregion\n//#region src/db/adapter/get-default-field-name.ts\nconst initGetDefaultFieldName = ({ schema, usePlural }) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tschema,\n\t\tusePlural\n\t});\n\t/**\n\t* This function helps us get the default field name from the schema defined by devs.\n\t* Often times, the user will be using the `fieldName` which could had been customized by the users.\n\t* This function helps us get the actual field name useful to match against the schema. (eg: schema[model].fields[field])\n\t*\n\t* If it's still unclear what this does:\n\t*\n\t* 1. User can define a custom fieldName.\n\t* 2. When using a custom fieldName, doing something like `schema[model].fields[field]` will not work.\n\t*/\n\tconst getDefaultFieldName = ({ field, model: unsafeModel }) => {\n\t\tif (field === \"id\" || field === \"_id\") return \"id\";\n\t\tconst model = getDefaultModelName(unsafeModel);\n\t\tlet f = schema[model]?.fields[field];\n\t\tif (!f) {\n\t\t\tconst result = Object.entries(schema[model].fields).find(([_, f$1]) => f$1.fieldName === field);\n\t\t\tif (result) {\n\t\t\t\tf = result[1];\n\t\t\t\tfield = result[0];\n\t\t\t}\n\t\t}\n\t\tif (!f) throw new BetterAuthError(`Field ${field} not found in model ${model}`);\n\t\treturn field;\n\t};\n\treturn getDefaultFieldName;\n};\n\n//#endregion\n//#region src/db/adapter/get-id-field.ts\nconst initGetIdField = ({ usePlural, schema, disableIdGeneration, options, customIdGenerator, supportsUUIDs }) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tusePlural,\n\t\tschema\n\t});\n\tconst idField = ({ customModelName, forceAllowId }) => {\n\t\tconst useNumberId = options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\";\n\t\tconst useUUIDs = options.advanced?.database?.generateId === \"uuid\";\n\t\tlet shouldGenerateId = (() => {\n\t\t\tif (disableIdGeneration) return false;\n\t\t\telse if (useNumberId && !forceAllowId) return false;\n\t\t\telse if (useUUIDs) return !supportsUUIDs;\n\t\t\telse return true;\n\t\t})();\n\t\tconst model = getDefaultModelName(customModelName ?? \"id\");\n\t\treturn {\n\t\t\ttype: useNumberId ? \"number\" : \"string\",\n\t\t\trequired: shouldGenerateId ? true : false,\n\t\t\t...shouldGenerateId ? { defaultValue() {\n\t\t\t\tif (disableIdGeneration) return void 0;\n\t\t\t\tlet generateId$1 = options.advanced?.database?.generateId;\n\t\t\t\tif (generateId$1 === false || useNumberId) return void 0;\n\t\t\t\tif (typeof generateId$1 === \"function\") return generateId$1({ model });\n\t\t\t\tif (customIdGenerator) return customIdGenerator({ model });\n\t\t\t\tif (generateId$1 === \"uuid\") return crypto.randomUUID();\n\t\t\t\treturn generateId();\n\t\t\t} } : {},\n\t\t\ttransform: {\n\t\t\t\tinput: (value) => {\n\t\t\t\t\tif (!value) return void 0;\n\t\t\t\t\tif (useNumberId) {\n\t\t\t\t\t\tconst numberValue = Number(value);\n\t\t\t\t\t\tif (isNaN(numberValue)) return;\n\t\t\t\t\t\treturn numberValue;\n\t\t\t\t\t}\n\t\t\t\t\tif (useUUIDs) {\n\t\t\t\t\t\tif (shouldGenerateId && !forceAllowId) return value;\n\t\t\t\t\t\tif (disableIdGeneration) return void 0;\n\t\t\t\t\t\tif (supportsUUIDs) return void 0;\n\t\t\t\t\t\tif (forceAllowId && typeof value === \"string\") if (/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(value)) return value;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst stack = (/* @__PURE__ */ new Error()).stack?.split(\"\\n\").filter((_, i) => i !== 1).join(\"\\n\").replace(\"Error:\", \"\");\n\t\t\t\t\t\t\tlogger.warn(\"[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.\", stack);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof value !== \"string\" && !supportsUUIDs) return crypto.randomUUID();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t},\n\t\t\t\toutput: (value) => {\n\t\t\t\t\tif (!value) return void 0;\n\t\t\t\t\treturn String(value);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\treturn idField;\n};\n\n//#endregion\n//#region src/db/adapter/get-field-attributes.ts\nconst initGetFieldAttributes = ({ usePlural, schema, options, customIdGenerator, disableIdGeneration }) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tusePlural,\n\t\tschema\n\t});\n\tconst getDefaultFieldName = initGetDefaultFieldName({\n\t\tusePlural,\n\t\tschema\n\t});\n\tconst idField = initGetIdField({\n\t\tusePlural,\n\t\tschema,\n\t\toptions,\n\t\tcustomIdGenerator,\n\t\tdisableIdGeneration\n\t});\n\tconst getFieldAttributes = ({ model, field }) => {\n\t\tconst defaultModelName = getDefaultModelName(model);\n\t\tconst defaultFieldName = getDefaultFieldName({\n\t\t\tfield,\n\t\t\tmodel: defaultModelName\n\t\t});\n\t\tconst fields = schema[defaultModelName].fields;\n\t\tfields.id = idField({ customModelName: defaultModelName });\n\t\tconst fieldAttributes = fields[defaultFieldName];\n\t\tif (!fieldAttributes) throw new BetterAuthError(`Field ${field} not found in model ${model}`);\n\t\treturn fieldAttributes;\n\t};\n\treturn getFieldAttributes;\n};\n\n//#endregion\n//#region src/db/adapter/get-field-name.ts\nconst initGetFieldName = ({ schema, usePlural }) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tschema,\n\t\tusePlural\n\t});\n\tconst getDefaultFieldName = initGetDefaultFieldName({\n\t\tschema,\n\t\tusePlural\n\t});\n\t/**\n\t* Get the field name which is expected to be saved in the database based on the user's schema.\n\t*\n\t* This function is useful if you need to save the field name to the database.\n\t*\n\t* For example, if the user has defined a custom field name for the `user` model, then you can use this function to get the actual field name from the schema.\n\t*/\n\tfunction getFieldName({ model: modelName, field: fieldName }) {\n\t\tconst model = getDefaultModelName(modelName);\n\t\tconst field = getDefaultFieldName({\n\t\t\tmodel,\n\t\t\tfield: fieldName\n\t\t});\n\t\treturn schema[model]?.fields[field]?.fieldName || field;\n\t}\n\treturn getFieldName;\n};\n\n//#endregion\n//#region src/db/adapter/get-model-name.ts\nconst initGetModelName = ({ usePlural, schema }) => {\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tschema,\n\t\tusePlural\n\t});\n\t/**\n\t* Users can overwrite the default model of some tables. This function helps find the correct model name.\n\t* Furthermore, if the user passes `usePlural` as true in their adapter config,\n\t* then we should return the model name ending with an `s`.\n\t*/\n\tconst getModelName = (model) => {\n\t\tconst defaultModelKey = getDefaultModelName(model);\n\t\tif (schema && schema[defaultModelKey] && schema[defaultModelKey].modelName !== model) return usePlural ? `${schema[defaultModelKey].modelName}s` : schema[defaultModelKey].modelName;\n\t\treturn usePlural ? `${model}s` : model;\n\t};\n\treturn getModelName;\n};\n\n//#endregion\n//#region src/db/adapter/utils.ts\nfunction withApplyDefault(value, field, action) {\n\tif (action === \"update\") {\n\t\tif (value === void 0 && field.onUpdate !== void 0) {\n\t\t\tif (typeof field.onUpdate === \"function\") return field.onUpdate();\n\t\t\treturn field.onUpdate;\n\t\t}\n\t\treturn value;\n\t}\n\tif (action === \"create\") {\n\t\tif (value === void 0 || field.required === true && value === null) {\n\t\t\tif (field.defaultValue !== void 0) {\n\t\t\t\tif (typeof field.defaultValue === \"function\") return field.defaultValue();\n\t\t\t\treturn field.defaultValue;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n}\nfunction isObject(item) {\n\treturn item !== null && typeof item === \"object\" && !Array.isArray(item);\n}\nfunction deepmerge(target, source) {\n\tif (Array.isArray(target) && Array.isArray(source)) return [...target, ...source];\n\telse if (isObject(target) && isObject(source)) {\n\t\tconst result = { ...target };\n\t\tfor (const [key, value] of Object.entries(source)) {\n\t\t\tif (value === void 0) continue;\n\t\t\tif (key in target) result[key] = deepmerge(target[key], value);\n\t\t\telse result[key] = value;\n\t\t}\n\t\treturn result;\n\t}\n\treturn source;\n}\n\n//#endregion\n//#region src/db/adapter/factory.ts\nlet debugLogs = [];\nlet transactionId = -1;\nconst createAsIsTransaction = (adapter) => (fn) => fn(adapter);\nconst createAdapterFactory = ({ adapter: customAdapter, config: cfg }) => (options) => {\n\tconst uniqueAdapterFactoryInstanceId = Math.random().toString(36).substring(2, 15);\n\tconst config = {\n\t\t...cfg,\n\t\tsupportsBooleans: cfg.supportsBooleans ?? true,\n\t\tsupportsDates: cfg.supportsDates ?? true,\n\t\tsupportsJSON: cfg.supportsJSON ?? false,\n\t\tadapterName: cfg.adapterName ?? cfg.adapterId,\n\t\tsupportsNumericIds: cfg.supportsNumericIds ?? true,\n\t\tsupportsUUIDs: cfg.supportsUUIDs ?? false,\n\t\tsupportsArrays: cfg.supportsArrays ?? false,\n\t\ttransaction: cfg.transaction ?? false,\n\t\tdisableTransformInput: cfg.disableTransformInput ?? false,\n\t\tdisableTransformOutput: cfg.disableTransformOutput ?? false,\n\t\tdisableTransformJoin: cfg.disableTransformJoin ?? false\n\t};\n\tif ((options.advanced?.database?.useNumberId === true || options.advanced?.database?.generateId === \"serial\") && config.supportsNumericIds === false) throw new BetterAuthError(`[${config.adapterName}] Your database or database adapter does not support numeric ids. Please disable \"useNumberId\" in your config.`);\n\tconst schema = getAuthTables(options);\n\tconst debugLog = (...args) => {\n\t\tif (config.debugLogs === true || typeof config.debugLogs === \"object\") {\n\t\t\tconst logger$2 = createLogger({ level: \"info\" });\n\t\t\tif (typeof config.debugLogs === \"object\" && \"isRunningAdapterTests\" in config.debugLogs) {\n\t\t\t\tif (config.debugLogs.isRunningAdapterTests) {\n\t\t\t\t\targs.shift();\n\t\t\t\t\tdebugLogs.push({\n\t\t\t\t\t\tinstance: uniqueAdapterFactoryInstanceId,\n\t\t\t\t\t\targs\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof config.debugLogs === \"object\" && config.debugLogs.logCondition && !config.debugLogs.logCondition?.()) return;\n\t\t\tif (typeof args[0] === \"object\" && \"method\" in args[0]) {\n\t\t\t\tconst method = args.shift().method;\n\t\t\t\tif (typeof config.debugLogs === \"object\") {\n\t\t\t\t\tif (method === \"create\" && !config.debugLogs.create) return;\n\t\t\t\t\telse if (method === \"update\" && !config.debugLogs.update) return;\n\t\t\t\t\telse if (method === \"updateMany\" && !config.debugLogs.updateMany) return;\n\t\t\t\t\telse if (method === \"findOne\" && !config.debugLogs.findOne) return;\n\t\t\t\t\telse if (method === \"findMany\" && !config.debugLogs.findMany) return;\n\t\t\t\t\telse if (method === \"delete\" && !config.debugLogs.delete) return;\n\t\t\t\t\telse if (method === \"deleteMany\" && !config.debugLogs.deleteMany) return;\n\t\t\t\t\telse if (method === \"count\" && !config.debugLogs.count) return;\n\t\t\t\t}\n\t\t\t\tlogger$2.info(`[${config.adapterName}]`, ...args);\n\t\t\t} else logger$2.info(`[${config.adapterName}]`, ...args);\n\t\t}\n\t};\n\tconst logger$1 = createLogger(options.logger);\n\tconst getDefaultModelName = initGetDefaultModelName({\n\t\tusePlural: config.usePlural,\n\t\tschema\n\t});\n\tconst getDefaultFieldName = initGetDefaultFieldName({\n\t\tusePlural: config.usePlural,\n\t\tschema\n\t});\n\tconst getModelName = initGetModelName({\n\t\tusePlural: config.usePlural,\n\t\tschema\n\t});\n\tconst getFieldName = initGetFieldName({\n\t\tschema,\n\t\tusePlural: config.usePlural\n\t});\n\tconst idField = initGetIdField({\n\t\tschema,\n\t\toptions,\n\t\tusePlural: config.usePlural,\n\t\tdisableIdGeneration: config.disableIdGeneration,\n\t\tcustomIdGenerator: config.customIdGenerator,\n\t\tsupportsUUIDs: config.supportsUUIDs\n\t});\n\tconst getFieldAttributes = initGetFieldAttributes({\n\t\tschema,\n\t\toptions,\n\t\tusePlural: config.usePlural,\n\t\tdisableIdGeneration: config.disableIdGeneration,\n\t\tcustomIdGenerator: config.customIdGenerator\n\t});\n\tconst transformInput = async (data, defaultModelName, action, forceAllowId) => {\n\t\tconst transformedData = {};\n\t\tconst fields = schema[defaultModelName].fields;\n\t\tconst newMappedKeys = config.mapKeysTransformInput ?? {};\n\t\tconst useNumberId = options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\";\n\t\tfields.id = idField({\n\t\t\tcustomModelName: defaultModelName,\n\t\t\tforceAllowId: forceAllowId && \"id\" in data\n\t\t});\n\t\tfor (const field in fields) {\n\t\t\tlet value = data[field];\n\t\t\tconst fieldAttributes = fields[field];\n\t\t\tlet newFieldName = newMappedKeys[field] || fields[field].fieldName || field;\n\t\t\tif (value === void 0 && (fieldAttributes.defaultValue === void 0 && !fieldAttributes.transform?.input && !(action === \"update\" && fieldAttributes.onUpdate) || action === \"update\" && !fieldAttributes.onUpdate)) continue;\n\t\t\tif (fieldAttributes && fieldAttributes.type === \"date\" && !(value instanceof Date) && typeof value === \"string\") try {\n\t\t\t\tvalue = new Date(value);\n\t\t\t} catch {\n\t\t\t\tlogger$1.error(\"[Adapter Factory] Failed to convert string to date\", {\n\t\t\t\t\tvalue,\n\t\t\t\t\tfield\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet newValue = withApplyDefault(value, fieldAttributes, action);\n\t\t\tif (fieldAttributes.transform?.input) newValue = await fieldAttributes.transform.input(newValue);\n\t\t\tif (fieldAttributes.references?.field === \"id\" && useNumberId) if (Array.isArray(newValue)) newValue = newValue.map((x) => x !== null ? Number(x) : null);\n\t\t\telse newValue = newValue !== null ? Number(newValue) : null;\n\t\t\telse if (config.supportsJSON === false && typeof newValue === \"object\" && fieldAttributes.type === \"json\") newValue = JSON.stringify(newValue);\n\t\t\telse if (config.supportsArrays === false && Array.isArray(newValue) && (fieldAttributes.type === \"string[]\" || fieldAttributes.type === \"number[]\")) newValue = JSON.stringify(newValue);\n\t\t\telse if (config.supportsDates === false && newValue instanceof Date && fieldAttributes.type === \"date\") newValue = newValue.toISOString();\n\t\t\telse if (config.supportsBooleans === false && typeof newValue === \"boolean\") newValue = newValue ? 1 : 0;\n\t\t\tif (config.customTransformInput) newValue = config.customTransformInput({\n\t\t\t\tdata: newValue,\n\t\t\t\taction,\n\t\t\t\tfield: newFieldName,\n\t\t\t\tfieldAttributes,\n\t\t\t\tmodel: getModelName(defaultModelName),\n\t\t\t\tschema,\n\t\t\t\toptions\n\t\t\t});\n\t\t\tif (newValue !== void 0) transformedData[newFieldName] = newValue;\n\t\t}\n\t\treturn transformedData;\n\t};\n\tconst transformOutput = async (data, unsafe_model, select = [], join) => {\n\t\tconst transformSingleOutput = async (data$1, unsafe_model$1, select$1 = []) => {\n\t\t\tif (!data$1) return null;\n\t\t\tconst newMappedKeys = config.mapKeysTransformOutput ?? {};\n\t\t\tconst transformedData$1 = {};\n\t\t\tconst tableSchema = schema[getDefaultModelName(unsafe_model$1)].fields;\n\t\t\tconst idKey = Object.entries(newMappedKeys).find(([_, v]) => v === \"id\")?.[0];\n\t\t\ttableSchema[idKey ?? \"id\"] = { type: options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\" ? \"number\" : \"string\" };\n\t\t\tfor (const key in tableSchema) {\n\t\t\t\tif (select$1.length && !select$1.includes(key)) continue;\n\t\t\t\tconst field = tableSchema[key];\n\t\t\t\tif (field) {\n\t\t\t\t\tconst originalKey = field.fieldName || key;\n\t\t\t\t\tlet newValue = data$1[Object.entries(newMappedKeys).find(([_, v]) => v === originalKey)?.[0] || originalKey];\n\t\t\t\t\tif (field.transform?.output) newValue = await field.transform.output(newValue);\n\t\t\t\t\tlet newFieldName = newMappedKeys[key] || key;\n\t\t\t\t\tif (originalKey === \"id\" || field.references?.field === \"id\") {\n\t\t\t\t\t\tif (typeof newValue !== \"undefined\" && newValue !== null) newValue = String(newValue);\n\t\t\t\t\t} else if (config.supportsJSON === false && typeof newValue === \"string\" && field.type === \"json\") newValue = safeJSONParse(newValue);\n\t\t\t\t\telse if (config.supportsArrays === false && typeof newValue === \"string\" && (field.type === \"string[]\" || field.type === \"number[]\")) newValue = safeJSONParse(newValue);\n\t\t\t\t\telse if (config.supportsDates === false && typeof newValue === \"string\" && field.type === \"date\") newValue = new Date(newValue);\n\t\t\t\t\telse if (config.supportsBooleans === false && typeof newValue === \"number\" && field.type === \"boolean\") newValue = newValue === 1;\n\t\t\t\t\tif (config.customTransformOutput) newValue = config.customTransformOutput({\n\t\t\t\t\t\tdata: newValue,\n\t\t\t\t\t\tfield: newFieldName,\n\t\t\t\t\t\tfieldAttributes: field,\n\t\t\t\t\t\tselect: select$1,\n\t\t\t\t\t\tmodel: getModelName(unsafe_model$1),\n\t\t\t\t\t\tschema,\n\t\t\t\t\t\toptions\n\t\t\t\t\t});\n\t\t\t\t\ttransformedData$1[newFieldName] = newValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn transformedData$1;\n\t\t};\n\t\tif (!join || Object.keys(join).length === 0) return await transformSingleOutput(data, unsafe_model, select);\n\t\tunsafe_model = getDefaultModelName(unsafe_model);\n\t\tlet transformedData = await transformSingleOutput(data, unsafe_model, select);\n\t\tconst requiredModels = Object.entries(join).map(([model, joinConfig]) => ({\n\t\t\tmodelName: getModelName(model),\n\t\t\tdefaultModelName: getDefaultModelName(model),\n\t\t\tjoinConfig\n\t\t}));\n\t\tif (!data) return null;\n\t\tfor (const { modelName, defaultModelName, joinConfig } of requiredModels) {\n\t\t\tlet joinedData = await (async () => {\n\t\t\t\tif (options.experimental?.joins) return data[modelName];\n\t\t\t\telse return await handleFallbackJoin({\n\t\t\t\t\tbaseModel: unsafe_model,\n\t\t\t\t\tbaseData: transformedData,\n\t\t\t\t\tjoinModel: modelName,\n\t\t\t\t\tspecificJoinConfig: joinConfig\n\t\t\t\t});\n\t\t\t})();\n\t\t\tif (joinedData === void 0 || joinedData === null) joinedData = joinConfig.relation === \"one-to-one\" ? null : [];\n\t\t\tif (joinConfig.relation === \"one-to-many\" && !Array.isArray(joinedData)) joinedData = [joinedData];\n\t\t\tlet transformed = [];\n\t\t\tif (Array.isArray(joinedData)) for (const item of joinedData) {\n\t\t\t\tconst transformedItem = await transformSingleOutput(item, modelName, []);\n\t\t\t\ttransformed.push(transformedItem);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst transformedItem = await transformSingleOutput(joinedData, modelName, []);\n\t\t\t\ttransformed.push(transformedItem);\n\t\t\t}\n\t\t\ttransformedData[defaultModelName] = (joinConfig.relation === \"one-to-one\" ? transformed[0] : transformed) ?? null;\n\t\t}\n\t\treturn transformedData;\n\t};\n\tconst transformWhereClause = ({ model, where }) => {\n\t\tif (!where) return void 0;\n\t\tconst newMappedKeys = config.mapKeysTransformInput ?? {};\n\t\treturn where.map((w) => {\n\t\t\tconst { field: unsafe_field, value, operator = \"eq\", connector = \"AND\" } = w;\n\t\t\tif (operator === \"in\") {\n\t\t\t\tif (!Array.isArray(value)) throw new BetterAuthError(\"Value must be an array\");\n\t\t\t}\n\t\t\tlet newValue = value;\n\t\t\tconst defaultModelName = getDefaultModelName(model);\n\t\t\tconst defaultFieldName = getDefaultFieldName({\n\t\t\t\tfield: unsafe_field,\n\t\t\t\tmodel\n\t\t\t});\n\t\t\tconst fieldName = newMappedKeys[defaultFieldName] || getFieldName({\n\t\t\t\tfield: defaultFieldName,\n\t\t\t\tmodel: defaultModelName\n\t\t\t});\n\t\t\tconst fieldAttr = getFieldAttributes({\n\t\t\t\tfield: defaultFieldName,\n\t\t\t\tmodel: defaultModelName\n\t\t\t});\n\t\t\tconst useNumberId = options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\";\n\t\t\tif (defaultFieldName === \"id\" || fieldAttr.references?.field === \"id\") {\n\t\t\t\tif (useNumberId) if (Array.isArray(value)) newValue = value.map(Number);\n\t\t\t\telse newValue = Number(value);\n\t\t\t}\n\t\t\tif (fieldAttr.type === \"date\" && value instanceof Date && !config.supportsDates) newValue = value.toISOString();\n\t\t\tif (fieldAttr.type === \"boolean\" && typeof value === \"boolean\" && !config.supportsBooleans) newValue = value ? 1 : 0;\n\t\t\tif (fieldAttr.type === \"json\" && typeof value === \"object\" && !config.supportsJSON) try {\n\t\t\t\tnewValue = JSON.stringify(value);\n\t\t\t} catch (error) {\n\t\t\t\tthrow new Error(`Failed to stringify JSON value for field ${fieldName}`, { cause: error });\n\t\t\t}\n\t\t\treturn {\n\t\t\t\toperator,\n\t\t\t\tconnector,\n\t\t\t\tfield: fieldName,\n\t\t\t\tvalue: newValue\n\t\t\t};\n\t\t});\n\t};\n\tconst transformJoinClause = (baseModel, unsanitizedJoin, select) => {\n\t\tif (!unsanitizedJoin) return void 0;\n\t\tif (Object.keys(unsanitizedJoin).length === 0) return void 0;\n\t\tconst transformedJoin = {};\n\t\tfor (const [model, join] of Object.entries(unsanitizedJoin)) {\n\t\t\tif (!join) continue;\n\t\t\tconst defaultModelName = getDefaultModelName(model);\n\t\t\tconst defaultBaseModelName = getDefaultModelName(baseModel);\n\t\t\tlet foreignKeys = Object.entries(schema[defaultModelName].fields).filter(([field, fieldAttributes]) => fieldAttributes.references && getDefaultModelName(fieldAttributes.references.model) === defaultBaseModelName);\n\t\t\tlet isForwardJoin = true;\n\t\t\tif (!foreignKeys.length) {\n\t\t\t\tforeignKeys = Object.entries(schema[defaultBaseModelName].fields).filter(([field, fieldAttributes]) => fieldAttributes.references && getDefaultModelName(fieldAttributes.references.model) === defaultModelName);\n\t\t\t\tisForwardJoin = false;\n\t\t\t}\n\t\t\tif (!foreignKeys.length) throw new BetterAuthError(`No foreign key found for model ${model} and base model ${baseModel} while performing join operation.`);\n\t\t\telse if (foreignKeys.length > 1) throw new BetterAuthError(`Multiple foreign keys found for model ${model} and base model ${baseModel} while performing join operation. Only one foreign key is supported.`);\n\t\t\tconst [foreignKey, foreignKeyAttributes] = foreignKeys[0];\n\t\t\tif (!foreignKeyAttributes.references) throw new BetterAuthError(`No references found for foreign key ${foreignKey} on model ${model} while performing join operation.`);\n\t\t\tlet from;\n\t\t\tlet to;\n\t\t\tlet requiredSelectField;\n\t\t\tif (isForwardJoin) {\n\t\t\t\trequiredSelectField = foreignKeyAttributes.references.field;\n\t\t\t\tfrom = getFieldName({\n\t\t\t\t\tmodel: baseModel,\n\t\t\t\t\tfield: requiredSelectField\n\t\t\t\t});\n\t\t\t\tto = getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: foreignKey\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\trequiredSelectField = foreignKey;\n\t\t\t\tfrom = getFieldName({\n\t\t\t\t\tmodel: baseModel,\n\t\t\t\t\tfield: requiredSelectField\n\t\t\t\t});\n\t\t\t\tto = getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: foreignKeyAttributes.references.field\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (select && !select.includes(requiredSelectField)) select.push(requiredSelectField);\n\t\t\tconst isUnique = to === \"id\" ? true : foreignKeyAttributes.unique ?? false;\n\t\t\tlet limit = options.advanced?.database?.defaultFindManyLimit ?? 100;\n\t\t\tif (isUnique) limit = 1;\n\t\t\telse if (typeof join === \"object\" && typeof join.limit === \"number\") limit = join.limit;\n\t\t\ttransformedJoin[getModelName(model)] = {\n\t\t\t\ton: {\n\t\t\t\t\tfrom,\n\t\t\t\t\tto\n\t\t\t\t},\n\t\t\t\tlimit,\n\t\t\t\trelation: isUnique ? \"one-to-one\" : \"one-to-many\"\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tjoin: transformedJoin,\n\t\t\tselect\n\t\t};\n\t};\n\t/**\n\t* Handle joins by making separate queries and combining results (fallback for adapters that don't support native joins).\n\t*/\n\tconst handleFallbackJoin = async ({ baseModel, baseData, joinModel, specificJoinConfig: joinConfig }) => {\n\t\tif (!baseData) return baseData;\n\t\tconst modelName = getModelName(joinModel);\n\t\tconst field = joinConfig.on.to;\n\t\tconst value = baseData[getDefaultFieldName({\n\t\t\tfield: joinConfig.on.from,\n\t\t\tmodel: baseModel\n\t\t})];\n\t\tif (value === null || value === void 0) return joinConfig.relation === \"one-to-one\" ? null : [];\n\t\tlet result;\n\t\tconst where = transformWhereClause({\n\t\t\tmodel: modelName,\n\t\t\twhere: [{\n\t\t\t\tfield,\n\t\t\t\tvalue,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\ttry {\n\t\t\tif (joinConfig.relation === \"one-to-one\") result = await adapterInstance.findOne({\n\t\t\t\tmodel: modelName,\n\t\t\t\twhere\n\t\t\t});\n\t\t\telse {\n\t\t\t\tconst limit = joinConfig.limit ?? options.advanced?.database?.defaultFindManyLimit ?? 100;\n\t\t\t\tresult = await adapterInstance.findMany({\n\t\t\t\t\tmodel: modelName,\n\t\t\t\t\twhere,\n\t\t\t\t\tlimit\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlogger$1.error(`Failed to query fallback join for model ${modelName}:`, {\n\t\t\t\twhere,\n\t\t\t\tlimit: joinConfig.limit\n\t\t\t});\n\t\t\tconsole.error(error);\n\t\t\tthrow error;\n\t\t}\n\t\treturn result;\n\t};\n\tconst adapterInstance = customAdapter({\n\t\toptions,\n\t\tschema,\n\t\tdebugLog,\n\t\tgetFieldName,\n\t\tgetModelName,\n\t\tgetDefaultModelName,\n\t\tgetDefaultFieldName,\n\t\tgetFieldAttributes,\n\t\ttransformInput,\n\t\ttransformOutput,\n\t\ttransformWhereClause\n\t});\n\tlet lazyLoadTransaction = null;\n\tconst adapter = {\n\t\ttransaction: async (cb) => {\n\t\t\tif (!lazyLoadTransaction) if (!config.transaction) lazyLoadTransaction = createAsIsTransaction(adapter);\n\t\t\telse {\n\t\t\t\tlogger$1.debug(`[${config.adapterName}] - Using provided transaction implementation.`);\n\t\t\t\tlazyLoadTransaction = config.transaction;\n\t\t\t}\n\t\t\treturn lazyLoadTransaction(cb);\n\t\t},\n\t\tcreate: async ({ data: unsafeData, model: unsafeModel, select, forceAllowId = false }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tif (\"id\" in unsafeData && typeof unsafeData.id !== \"undefined\" && !forceAllowId) {\n\t\t\t\tlogger$1.warn(`[${config.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \\`forceAllowId\\` parameter. The id will be ignored.`);\n\t\t\t\tconst stack = (/* @__PURE__ */ new Error()).stack?.split(\"\\n\").filter((_, i) => i !== 1).join(\"\\n\").replace(\"Error:\", \"Create method with `id` being called at:\");\n\t\t\t\tconsole.log(stack);\n\t\t\t\tunsafeData.id = void 0;\n\t\t\t}\n\t\t\tdebugLog({ method: \"create\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 4)}`, `${formatMethod(\"create\")} ${formatAction(\"Unsafe Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: unsafeData\n\t\t\t});\n\t\t\tlet data = unsafeData;\n\t\t\tif (!config.disableTransformInput) data = await transformInput(unsafeData, unsafeModel, \"create\", forceAllowId);\n\t\t\tdebugLog({ method: \"create\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 4)}`, `${formatMethod(\"create\")} ${formatAction(\"Parsed Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata\n\t\t\t});\n\t\t\tconst res = await adapterInstance.create({\n\t\t\t\tdata,\n\t\t\t\tmodel\n\t\t\t});\n\t\t\tdebugLog({ method: \"create\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(3, 4)}`, `${formatMethod(\"create\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tres\n\t\t\t});\n\t\t\tlet transformed = res;\n\t\t\tif (!config.disableTransformOutput) transformed = await transformOutput(res, unsafeModel, select, void 0);\n\t\t\tdebugLog({ method: \"create\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(4, 4)}`, `${formatMethod(\"create\")} ${formatAction(\"Parsed Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: transformed\n\t\t\t});\n\t\t\treturn transformed;\n\t\t},\n\t\tupdate: async ({ model: unsafeModel, where: unsafeWhere, update: unsafeData }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere\n\t\t\t});\n\t\t\tdebugLog({ method: \"update\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 4)}`, `${formatMethod(\"update\")} ${formatAction(\"Unsafe Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: unsafeData\n\t\t\t});\n\t\t\tlet data = unsafeData;\n\t\t\tif (!config.disableTransformInput) data = await transformInput(unsafeData, unsafeModel, \"update\");\n\t\t\tdebugLog({ method: \"update\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 4)}`, `${formatMethod(\"update\")} ${formatAction(\"Parsed Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata\n\t\t\t});\n\t\t\tconst res = await adapterInstance.update({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tupdate: data\n\t\t\t});\n\t\t\tdebugLog({ method: \"update\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(3, 4)}`, `${formatMethod(\"update\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: res\n\t\t\t});\n\t\t\tlet transformed = res;\n\t\t\tif (!config.disableTransformOutput) transformed = await transformOutput(res, unsafeModel, void 0, void 0);\n\t\t\tdebugLog({ method: \"update\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(4, 4)}`, `${formatMethod(\"update\")} ${formatAction(\"Parsed Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: transformed\n\t\t\t});\n\t\t\treturn transformed;\n\t\t},\n\t\tupdateMany: async ({ model: unsafeModel, where: unsafeWhere, update: unsafeData }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tdebugLog({ method: \"updateMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 4)}`, `${formatMethod(\"updateMany\")} ${formatAction(\"Unsafe Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: unsafeData\n\t\t\t});\n\t\t\tlet data = unsafeData;\n\t\t\tif (!config.disableTransformInput) data = await transformInput(unsafeData, unsafeModel, \"update\");\n\t\t\tdebugLog({ method: \"updateMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 4)}`, `${formatMethod(\"updateMany\")} ${formatAction(\"Parsed Input\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata\n\t\t\t});\n\t\t\tconst updatedCount = await adapterInstance.updateMany({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tupdate: data\n\t\t\t});\n\t\t\tdebugLog({ method: \"updateMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(3, 4)}`, `${formatMethod(\"updateMany\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: updatedCount\n\t\t\t});\n\t\t\tdebugLog({ method: \"updateMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(4, 4)}`, `${formatMethod(\"updateMany\")} ${formatAction(\"Parsed Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: updatedCount\n\t\t\t});\n\t\t\treturn updatedCount;\n\t\t},\n\t\tfindOne: async ({ model: unsafeModel, where: unsafeWhere, select, join: unsafeJoin }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tlet join;\n\t\t\tlet passJoinToAdapter = true;\n\t\t\tif (!config.disableTransformJoin) {\n\t\t\t\tconst result = transformJoinClause(unsafeModel, unsafeJoin, select);\n\t\t\t\tif (result) {\n\t\t\t\t\tjoin = result.join;\n\t\t\t\t\tselect = result.select;\n\t\t\t\t}\n\t\t\t\tif (!options.experimental?.joins && join && Object.keys(join).length > 0) passJoinToAdapter = false;\n\t\t\t} else join = unsafeJoin;\n\t\t\tdebugLog({ method: \"findOne\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 3)}`, `${formatMethod(\"findOne\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tselect,\n\t\t\t\tjoin\n\t\t\t});\n\t\t\tconst res = await adapterInstance.findOne({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tselect,\n\t\t\t\tjoin: passJoinToAdapter ? join : void 0\n\t\t\t});\n\t\t\tdebugLog({ method: \"findOne\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 3)}`, `${formatMethod(\"findOne\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: res\n\t\t\t});\n\t\t\tlet transformed = res;\n\t\t\tif (!config.disableTransformOutput) transformed = await transformOutput(res, unsafeModel, select, join);\n\t\t\tdebugLog({ method: \"findOne\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(3, 3)}`, `${formatMethod(\"findOne\")} ${formatAction(\"Parsed Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: transformed\n\t\t\t});\n\t\t\treturn transformed;\n\t\t},\n\t\tfindMany: async ({ model: unsafeModel, where: unsafeWhere, limit: unsafeLimit, sortBy, offset, join: unsafeJoin }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst limit = unsafeLimit ?? options.advanced?.database?.defaultFindManyLimit ?? 100;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tlet join;\n\t\t\tlet passJoinToAdapter = true;\n\t\t\tif (!config.disableTransformJoin) {\n\t\t\t\tconst result = transformJoinClause(unsafeModel, unsafeJoin, void 0);\n\t\t\t\tif (result) join = result.join;\n\t\t\t\tif (!options.experimental?.joins && join && Object.keys(join).length > 0) passJoinToAdapter = false;\n\t\t\t} else join = unsafeJoin;\n\t\t\tdebugLog({ method: \"findMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 3)}`, `${formatMethod(\"findMany\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tlimit,\n\t\t\t\tsortBy,\n\t\t\t\toffset,\n\t\t\t\tjoin\n\t\t\t});\n\t\t\tconst res = await adapterInstance.findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tlimit,\n\t\t\t\tsortBy,\n\t\t\t\toffset,\n\t\t\t\tjoin: passJoinToAdapter ? join : void 0\n\t\t\t});\n\t\t\tdebugLog({ method: \"findMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 3)}`, `${formatMethod(\"findMany\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: res\n\t\t\t});\n\t\t\tlet transformed = res;\n\t\t\tif (!config.disableTransformOutput) transformed = await Promise.all(res.map(async (r) => {\n\t\t\t\treturn await transformOutput(r, unsafeModel, void 0, join);\n\t\t\t}));\n\t\t\tdebugLog({ method: \"findMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(3, 3)}`, `${formatMethod(\"findMany\")} ${formatAction(\"Parsed Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: transformed\n\t\t\t});\n\t\t\treturn transformed;\n\t\t},\n\t\tdelete: async ({ model: unsafeModel, where: unsafeWhere }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tdebugLog({ method: \"delete\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 2)}`, `${formatMethod(\"delete\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tawait adapterInstance.delete({\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tdebugLog({ method: \"delete\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 2)}`, `${formatMethod(\"delete\")} ${formatAction(\"DB Result\")}:`, { model });\n\t\t},\n\t\tdeleteMany: async ({ model: unsafeModel, where: unsafeWhere }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tdebugLog({ method: \"deleteMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 2)}`, `${formatMethod(\"deleteMany\")} ${formatAction(\"DeleteMany\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tconst res = await adapterInstance.deleteMany({\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tdebugLog({ method: \"deleteMany\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 2)}`, `${formatMethod(\"deleteMany\")} ${formatAction(\"DB Result\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: res\n\t\t\t});\n\t\t\treturn res;\n\t\t},\n\t\tcount: async ({ model: unsafeModel, where: unsafeWhere }) => {\n\t\t\ttransactionId++;\n\t\t\tlet thisTransactionId = transactionId;\n\t\t\tconst model = getModelName(unsafeModel);\n\t\t\tconst where = transformWhereClause({\n\t\t\t\tmodel: unsafeModel,\n\t\t\t\twhere: unsafeWhere\n\t\t\t});\n\t\t\tunsafeModel = getDefaultModelName(unsafeModel);\n\t\t\tdebugLog({ method: \"count\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(1, 2)}`, `${formatMethod(\"count\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tconst res = await adapterInstance.count({\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t\tdebugLog({ method: \"count\" }, `${formatTransactionId(thisTransactionId)} ${formatStep(2, 2)}`, `${formatMethod(\"count\")}:`, {\n\t\t\t\tmodel,\n\t\t\t\tdata: res\n\t\t\t});\n\t\t\treturn res;\n\t\t},\n\t\tcreateSchema: adapterInstance.createSchema ? async (_, file) => {\n\t\t\tconst tables = getAuthTables(options);\n\t\t\tif (options.secondaryStorage && !options.session?.storeSessionInDatabase) delete tables.session;\n\t\t\tif (options.rateLimit && options.rateLimit.storage === \"database\" && (typeof options.rateLimit.enabled === \"undefined\" || options.rateLimit.enabled === true)) tables.ratelimit = {\n\t\t\t\tmodelName: options.rateLimit.modelName ?? \"ratelimit\",\n\t\t\t\tfields: {\n\t\t\t\t\tkey: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tunique: true,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tfieldName: options.rateLimit.fields?.key ?? \"key\"\n\t\t\t\t\t},\n\t\t\t\t\tcount: {\n\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tfieldName: options.rateLimit.fields?.count ?? \"count\"\n\t\t\t\t\t},\n\t\t\t\t\tlastRequest: {\n\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tbigint: true,\n\t\t\t\t\t\tdefaultValue: () => Date.now(),\n\t\t\t\t\t\tfieldName: options.rateLimit.fields?.lastRequest ?? \"lastRequest\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn adapterInstance.createSchema({\n\t\t\t\tfile,\n\t\t\t\ttables\n\t\t\t});\n\t\t} : void 0,\n\t\toptions: {\n\t\t\tadapterConfig: config,\n\t\t\t...adapterInstance.options ?? {}\n\t\t},\n\t\tid: config.adapterId,\n\t\t...config.debugLogs?.isRunningAdapterTests ? { adapterTestDebugLogs: {\n\t\t\tresetDebugLogs() {\n\t\t\t\tdebugLogs = debugLogs.filter((log) => log.instance !== uniqueAdapterFactoryInstanceId);\n\t\t\t},\n\t\t\tprintDebugLogs() {\n\t\t\t\tconst separator = ``.repeat(80);\n\t\t\t\tconst logs = debugLogs.filter((log$1) => log$1.instance === uniqueAdapterFactoryInstanceId);\n\t\t\t\tif (logs.length === 0) return;\n\t\t\t\tlet log = logs.reverse().map((log$1) => {\n\t\t\t\t\tlog$1.args[0] = `\\n${log$1.args[0]}`;\n\t\t\t\t\treturn [...log$1.args, \"\\n\"];\n\t\t\t\t}).reduce((prev, curr) => {\n\t\t\t\t\treturn [...curr, ...prev];\n\t\t\t\t}, [`\\n${separator}`]);\n\t\t\t\tconsole.log(...log);\n\t\t\t}\n\t\t} } : {}\n\t};\n\treturn adapter;\n};\nfunction formatTransactionId(transactionId$1) {\n\tif (getColorDepth() < 8) return `#${transactionId$1}`;\n\treturn `${TTY_COLORS.fg.magenta}#${transactionId$1}${TTY_COLORS.reset}`;\n}\nfunction formatStep(step, total) {\n\treturn `${TTY_COLORS.bg.black}${TTY_COLORS.fg.yellow}[${step}/${total}]${TTY_COLORS.reset}`;\n}\nfunction formatMethod(method) {\n\treturn `${TTY_COLORS.bright}${method}${TTY_COLORS.reset}`;\n}\nfunction formatAction(action) {\n\treturn `${TTY_COLORS.dim}(${action})${TTY_COLORS.reset}`;\n}\n/**\n* @deprecated Use `createAdapterFactory` instead. This export will be removed in a future version.\n* @alias\n*/\nconst createAdapter = createAdapterFactory;\n\n//#endregion\nexport { createAdapter, createAdapterFactory, deepmerge, initGetDefaultFieldName, initGetDefaultModelName, initGetFieldAttributes, initGetFieldName, initGetIdField, initGetModelName, withApplyDefault };"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5]}