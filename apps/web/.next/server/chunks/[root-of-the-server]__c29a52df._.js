module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},42548,e=>{"use strict";let t={free:{aiCallsPerMonth:0,privateRepos:0,analysesPerDay:100,members:1,historyDays:0},team:{aiCallsPerMonth:5e3,privateRepos:1/0,analysesPerDay:1e3,members:1/0,historyDays:30},pro:{aiCallsPerMonth:25e3,privateRepos:1/0,analysesPerDay:1e4,members:1/0,historyDays:90},enterprise:{aiCallsPerMonth:1/0,privateRepos:1/0,analysesPerDay:1/0,members:1/0,historyDays:365},hero:{aiCallsPerMonth:25e3,privateRepos:1/0,analysesPerDay:1e4,members:1/0,historyDays:90}};function r(e){return t[e]??t.free}e.s(["getPlanLimits",()=>r])},33811,e=>{"use strict";e.i(42548),e.s([],33811)},22632,e=>{"use strict";e.s([],54033),e.i(54033);var t=e.i(85676),r=e.i(80264);e.s(["defaultErrorMap",()=>r.default,"getErrorMap",()=>t.getErrorMap,"setErrorMap",()=>t.setErrorMap],76733),e.i(76733);var o=e.i(84488);e.s([],91316),e.i(91316);var a=e.i(42944),s=e.i(17958),i=e.i(15235);e.s(["BRAND",()=>s.BRAND,"DIRTY",()=>o.DIRTY,"EMPTY_PATH",()=>o.EMPTY_PATH,"INVALID",()=>o.INVALID,"NEVER",()=>s.NEVER,"OK",()=>o.OK,"ParseStatus",()=>o.ParseStatus,"Schema",()=>s.Schema,"ZodAny",()=>s.ZodAny,"ZodArray",()=>s.ZodArray,"ZodBigInt",()=>s.ZodBigInt,"ZodBoolean",()=>s.ZodBoolean,"ZodBranded",()=>s.ZodBranded,"ZodCatch",()=>s.ZodCatch,"ZodDate",()=>s.ZodDate,"ZodDefault",()=>s.ZodDefault,"ZodDiscriminatedUnion",()=>s.ZodDiscriminatedUnion,"ZodEffects",()=>s.ZodEffects,"ZodEnum",()=>s.ZodEnum,"ZodError",()=>i.ZodError,"ZodFirstPartyTypeKind",()=>s.ZodFirstPartyTypeKind,"ZodFunction",()=>s.ZodFunction,"ZodIntersection",()=>s.ZodIntersection,"ZodIssueCode",()=>i.ZodIssueCode,"ZodLazy",()=>s.ZodLazy,"ZodLiteral",()=>s.ZodLiteral,"ZodMap",()=>s.ZodMap,"ZodNaN",()=>s.ZodNaN,"ZodNativeEnum",()=>s.ZodNativeEnum,"ZodNever",()=>s.ZodNever,"ZodNull",()=>s.ZodNull,"ZodNullable",()=>s.ZodNullable,"ZodNumber",()=>s.ZodNumber,"ZodObject",()=>s.ZodObject,"ZodOptional",()=>s.ZodOptional,"ZodParsedType",()=>a.ZodParsedType,"ZodPipeline",()=>s.ZodPipeline,"ZodPromise",()=>s.ZodPromise,"ZodReadonly",()=>s.ZodReadonly,"ZodRecord",()=>s.ZodRecord,"ZodSchema",()=>s.ZodSchema,"ZodSet",()=>s.ZodSet,"ZodString",()=>s.ZodString,"ZodSymbol",()=>s.ZodSymbol,"ZodTransformer",()=>s.ZodTransformer,"ZodTuple",()=>s.ZodTuple,"ZodType",()=>s.ZodType,"ZodUndefined",()=>s.ZodUndefined,"ZodUnion",()=>s.ZodUnion,"ZodUnknown",()=>s.ZodUnknown,"ZodVoid",()=>s.ZodVoid,"addIssueToContext",()=>o.addIssueToContext,"any",()=>s.any,"array",()=>s.array,"bigint",()=>s.bigint,"boolean",()=>s.boolean,"coerce",()=>s.coerce,"custom",()=>s.custom,"date",()=>s.date,"datetimeRegex",()=>s.datetimeRegex,"defaultErrorMap",()=>r.default,"discriminatedUnion",()=>s.discriminatedUnion,"effect",()=>s.effect,"enum",()=>s.enum,"function",()=>s.function,"getErrorMap",()=>t.getErrorMap,"getParsedType",()=>a.getParsedType,"instanceof",()=>s.instanceof,"intersection",()=>s.intersection,"isAborted",()=>o.isAborted,"isAsync",()=>o.isAsync,"isDirty",()=>o.isDirty,"isValid",()=>o.isValid,"late",()=>s.late,"lazy",()=>s.lazy,"literal",()=>s.literal,"makeIssue",()=>o.makeIssue,"map",()=>s.map,"nan",()=>s.nan,"nativeEnum",()=>s.nativeEnum,"never",()=>s.never,"null",()=>s.null,"nullable",()=>s.nullable,"number",()=>s.number,"object",()=>s.object,"objectUtil",()=>a.objectUtil,"oboolean",()=>s.oboolean,"onumber",()=>s.onumber,"optional",()=>s.optional,"ostring",()=>s.ostring,"pipeline",()=>s.pipeline,"preprocess",()=>s.preprocess,"promise",()=>s.promise,"quotelessJson",()=>i.quotelessJson,"record",()=>s.record,"set",()=>s.set,"setErrorMap",()=>t.setErrorMap,"strictObject",()=>s.strictObject,"string",()=>s.string,"symbol",()=>s.symbol,"transformer",()=>s.transformer,"tuple",()=>s.tuple,"undefined",()=>s.undefined,"union",()=>s.union,"unknown",()=>s.unknown,"util",()=>a.util,"void",()=>s.void],35907);var n=e.i(35907);e.s(["z",0,n],22632)},32828,e=>{"use strict";var t=e.i(66680),r=e.i(27356);let o="doccov_";function a(){let e=(0,r.nanoid)(32),t=`${o}${e}`,a=s(t),i=t.slice(0,12);return{key:t,hash:a,prefix:i}}function s(e){return(0,t.createHash)("sha256").update(e).digest("hex")}function i(e){return e.startsWith(o)&&e.length===o.length+32}e.s(["generateApiKey",()=>a,"hashApiKey",()=>s,"isValidKeyFormat",()=>i])},30682,e=>{"use strict";var t=e.i(32828);async function r(e,r){let o=e.headers.get("Authorization");if(!o)return{ok:!1,error:"API key required",status:401,docs:"https://docs.doccov.com/api-keys"};if(!o.startsWith("Bearer "))return{ok:!1,error:"Invalid Authorization header. Use: Bearer <api_key>",status:401};let a=o.slice(7);if(!(0,t.isValidKeyFormat)(a))return{ok:!1,error:"Invalid API key format",status:401};let s=(0,t.hashApiKey)(a),i=await r.selectFrom("api_keys").innerJoin("organizations","organizations.id","api_keys.orgId").where("api_keys.keyHash","=",s).where(e=>e.or([e("api_keys.expiresAt","is",null),e("api_keys.expiresAt",">",new Date)])).select(["api_keys.id as keyId","api_keys.orgId","api_keys.name as keyName","organizations.plan","organizations.aiCallsUsed","organizations.aiCallsResetAt"]).executeTakeFirst();return i?"free"===i.plan?{ok:!1,error:"API access requires a paid plan",status:403,upgrade:"https://doccov.com/pricing"}:(r.updateTable("api_keys").set({lastUsedAt:new Date}).where("id","=",i.keyId).execute().catch(console.error),{ok:!0,context:{apiKey:{id:i.keyId,orgId:i.orgId,name:i.keyName},org:{id:i.orgId,plan:i.plan,aiCallsUsed:i.aiCallsUsed,aiCallsResetAt:i.aiCallsResetAt}}}):{ok:!1,error:"Invalid or expired API key",status:401}}e.s(["validateApiKey",()=>r])},26575,e=>{"use strict";var t=e.i(22632);t.z.object({DATABASE_URL:t.z.string().url(),GITHUB_CLIENT_ID:t.z.string().min(1),GITHUB_CLIENT_SECRET:t.z.string().min(1),GITHUB_APP_ID:t.z.string().min(1).optional(),GITHUB_APP_PRIVATE_KEY:t.z.string().min(1).optional(),GITHUB_APP_WEBHOOK_SECRET:t.z.string().min(1).optional(),POLAR_ACCESS_TOKEN:t.z.string().min(1).optional(),POLAR_WEBHOOK_SECRET:t.z.string().min(1).optional(),POLAR_PRODUCT_TEAM:t.z.string().optional(),POLAR_PRODUCT_PRO:t.z.string().optional(),ANTHROPIC_API_KEY:t.z.string().min(1).optional(),OPENAI_API_KEY:t.z.string().min(1).optional(),SITE_URL:t.z.string().url().default("http://localhost:3000"),API_URL:t.z.string().url().default("http://localhost:3001"),SANDBOX_URL:t.z.string().url().optional(),SANDBOX_SECRET:t.z.string().min(1).optional(),NODE_ENV:t.z.enum(["development","production","test"]).default("development")}),e.i(30682);class r{store=new Map;get(e){let t=this.store.get(e);return t&&Date.now()>t.resetAt?void this.store.delete(e):t}increment(e,t){let r=Date.now(),o=this.get(e);if(o)return o.count++,o;let a={count:1,resetAt:r+t};return this.store.set(e,a),a}cleanup(){let e=Date.now();for(let[t,r]of this.store.entries())e>r.resetAt&&this.store.delete(t)}}let o=new r;"undefined"!=typeof setInterval&&setInterval(()=>o.cleanup(),6e4).unref?.(),e.i(32828),e.s([],26575)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c29a52df._.js.map